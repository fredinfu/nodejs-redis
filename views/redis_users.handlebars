
<h1>Redis Users</h1>
<ul class="list-group">
    {{#each users}}
    <li class="list-group-item d-flex justify-content-between align-items-center"><strong>User: </strong>{{this}} 
        <a class="badge badge-warning badge-pill" style="float: right" onclick="detailsUser('{{this}}')">Details</a>
        <a class="badge badge-warning badge-pill" style="float: right" onclick="updateUser('{{this}}')">Update</a>
        <a class="badge badge-warning badge-pill" style="float: right" onclick="deleteUser('{{this}}')">Delete</a>
    </li>
               
    {{/each}}
<a href="/user/add" class="btn btn-success pull-left">Add User</a>
            {{!-- <form method="POST" action="/user/delete/{{user.id}}?_method=DELETE">
    </form>   --}}

        {{!-- <form method="POST" action="/user/delete/{{user.id}}?_method=DELETE">
        <span class="badge badge-primary badge-pill">14</span>
    </form>   --}}
    {{!-- <li class="list-group-item"><strong>Phone: </strong>{{user.phone}}</li> --}}
</ul>

<script>
    function deleteUser(user) {
                var form = document.createElement("form");
        var id = document.createElement("input");         

        form.method = "POST";
        form.action = "/user/delete/"+user+"?_method=DELETE";   

        id.value=user;
        id.name="id";
        form.appendChild(id);  

        document.body.appendChild(form);

        form.submit();

    }

    function detailsUser(user) {
        var form = document.createElement("form");
        var id = document.createElement("input");         

        form.method = "POST";
        form.action = "/user/search";   

        id.value=user;
        id.name="id";
        form.appendChild(id);  

        document.body.appendChild(form);

        form.submit();

    }

    function updateUser(user) {
        var form = document.createElement("form");
        var id = document.createElement("input");         

        form.method = "GET";
        form.action = "/user/update?id="+id;   

        id.value=user;
        id.name="id";
        form.appendChild(id);  

        document.body.appendChild(form);

        form.submit();
    }
</script>
